spring:
  application:
    name: lostark-backend
  
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:mariadb://localhost:3307/lostark}
    username: ${SPRING_DATASOURCE_USERNAME:lostark_user}
    password: ${SPRING_DATASOURCE_PASSWORD:lostark-pass-2024}
    driver-class-name: org.mariadb.jdbc.Driver
  
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MariaDBDialect

  security:
    oauth2:
      client:
        registration:
          discord:
            client-id: ${DISCORD_CLIENT_ID:}
            client-secret: ${DISCORD_CLIENT_SECRET:}
            scope:
              - identify
            authorization-grant-type: authorization_code
            redirect-uri: "{baseUrl}/api/login/oauth2/code/{registrationId}"
        provider:
          discord:
            authorization-uri: https://discord.com/api/oauth2/authorize
            token-uri: https://discord.com/api/oauth2/token
            user-info-uri: https://discord.com/api/users/@me
            user-name-attribute: id

lostark:
  api:
    key: ${LOSTARK_API_KEY}
    base-url: https://developer-lostark.game.onstove.com

server:
  port: 8080
  forward-headers-strategy: framework
  servlet:
    session:
      cookie:
        same-site: ${SESSION_COOKIE_SAME_SITE:Lax}
        secure: ${SESSION_COOKIE_SECURE:false}

# Discord Bot
discord:
  bot:
    token: ${DISCORD_BOT_TOKEN}

# Kakao OAuth2 (선택)
kakao:
  client:
    id: ${KAKAO_CLIENT_ID}
    secret: ${KAKAO_CLIENT_SECRET}

app:
  frontend:
    base-url: ${FRONTEND_BASE_URL:http://localhost:5173}
    success-redirect-path: ${FRONTEND_LOGIN_REDIRECT_PATH:/raid}
  cors:
    allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:5173,http://localhost:8081}
  security:
    dev-login:
      enabled: ${APP_SECURITY_DEV_LOGIN_ENABLED:false}
    csrf:
      cookie:
        same-site: ${CSRF_COOKIE_SAME_SITE:${SESSION_COOKIE_SAME_SITE:Lax}}
        secure: ${CSRF_COOKIE_SECURE:${SESSION_COOKIE_SECURE:false}}
